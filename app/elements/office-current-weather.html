<link rel="import" href="../bower_components/current-weather/dist/current-weather.html">

<dom-module id="office-current-weather">
  <template>
    <style>
      :host {
        display: inline-block;
      }

      current-weather {
        width: 100%;
      }
    </style>

    <current-weather id="weather" lat="37.4024559" lon="-121.9157612" name conditiontext units="metric" app-id="4c3bc98156fe81116bb2d962ac1fc9a5"></current-weather>
  </template>

  <script>
    (function () {
      'use strict';

      Polymer({
        is: 'office-current-weather',
        properties: {

        },

        attached: function() {
          this._timerId = setInterval(this._fetchData.bind(this), 10*60*1000);
        },

        detached: function() {
          if (this._timerId) {
            clearInterval(this._timerId);
          }
        },

        _fetchData: function() {
          console.log('Requesting latest weather');
          // change lat a bit to make <current-weather> update weather info
          if (this.$.weather.lat === '37.4024559') {
            this.$.weather.lat = '37.4024558';
          } else {
            this.$.weather.lat = '37.4024559';
          }
        }

      });
    })();
  </script>

</dom-module>
